{"ast":null,"code":"var _jsxFileName = \"/Users/nathan.schroeder/Documents/dev/TSIntegrationDemo/ts-integration-demo/src/Content.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React, { useState, useEffect, setState } from 'react';\nimport { init, AuthType, Page, EmbedEvent, Action, HostEvent } from '@thoughtspot/visual-embed-sdk';\nimport { SearchEmbed, LiveboardEmbed, AppEmbed, useEmbedRef } from '@thoughtspot/visual-embed-sdk/react';\nimport { MultiSelect } from \"react-multi-select-component\";\nimport NotePopup from './NotePopup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Content(props) {\n  _s();\n\n  const {\n    settings,\n    showSettings\n  } = props;\n  const thoughtspot_URL = \"https://se-thoughtspot-cloud.thoughtspot.cloud/#/\";\n  const [renderType, setRenderType] = useState('');\n  const [renderContent, setRenderContent] = useState('');\n  const [renderName, setRenderName] = useState('');\n  const [runFilters, setRunFilters] = useState('');\n  const [selectedFilters, setSelectedFilters] = useState('');\n  const [filterKey, setFilterKey] = useState('');\n  const [renderKey, setRenderKey] = useState('');\n  const [searchFields, setSearchFields] = useState('');\n  const embedRef = useEmbedRef();\n  const [popupVisible, setPopupVisible] = useState('');\n  const [popupConfig, setPopupConfig] = useState('');\n  const [token, setToken] = useState('');\n  const [restContent, setRestContent] = useState('');\n  const MemorizedSearchEmbed = /*#__PURE__*/React.memo(SearchEmbed);\n\n  function togglePopupVisible() {\n    setPopupVisible(!popupVisible);\n  }\n\n  useEffect(() => {\n    if (settings.URL) {\n      console.log(settings.URL);\n\n      try {\n        init({\n          thoughtSpotHost: settings.URL,\n          authType: AuthType.None\n        });\n      } catch (err) {\n        alert(\"could not connect to thoughtspot\");\n      }\n\n      getUserContentv1();\n\n      if (settings.username) {//getToken()\n      }\n    } //Setup Default Filters && REST Lists\n\n\n    var defaultFilters = {};\n\n    if (settings.links) {\n      var filterObjs = [];\n      var defaultsFound = false;\n\n      for (var link of settings.links) {\n        if (settings.linkTypes[link] == 'Filter') {\n          var filterContent = settings.linkContents[link].split(\"|\");\n          var filterName = settings.linkNames[link];\n\n          if (filterContent.length > 1) {\n            for (var i = 1; i < filterContent.length; i++) {\n              var prop = filterContent[i].split(\"=\")[0];\n              var val = filterContent[i].split(\"=\")[1];\n\n              if (prop == 'default') {\n                var filterObj = {\n                  columnName: filterName,\n                  operator: 'IN',\n                  values: [val]\n                };\n                defaultFilters[filterName] = [{\n                  label: val,\n                  value: val\n                }];\n                filterObjs.push(filterObj);\n                defaultsFound = true;\n              }\n            }\n          }\n        }\n\n        if (settings.linkTypes[link] == 'Rest') {\n          var type = \"all\";\n          var restURLParams = \"\";\n          var params = settings.linkContents[link].split(\"|\");\n          var catType = \"ALL\";\n\n          for (var param of params) {\n            var paramKey = param.split(\"=\")[0];\n            var paramVal = param.split(\"=\")[1];\n\n            if (paramKey == \"type\") {\n              type = paramVal;\n            }\n\n            if (paramKey == \"sort\") {\n              restURLParams += \"&sort=\" + paramVal;\n            }\n\n            if (paramKey == \"tags\") {\n              restURLParams += \"&tagname=\" + JSON.stringify(paramVal.split(\",\"));\n            }\n\n            if (paramKey == \"category\") {\n              catType = paramVal.toUpperCase();\n            }\n\n            restURLParams += \"&category=\" + catType;\n            getUserContentv1(type, link, restURLParams);\n          }\n        }\n      }\n    }\n\n    if (defaultsFound) {\n      setRunFilters(filterObjs);\n      setSelectedFilters(defaultFilters);\n    }\n\n    if (!runFilters && !defaultsFound) setRunFilters([]);\n    if (!selectedFilters && !defaultsFound) setSelectedFilters({});\n  }, []);\n\n  function renderLink(type, content, name) {\n    setRenderContent(content);\n    setRenderType(type);\n    setRenderName(name);\n    setRenderKey(Date.now());\n    var newRunFilters = []; //Only keep filter values if that filter exists in the new content\n\n    for (var link of settings.links) {\n      if ((settings.linkTypes[link] == 'Filter' || settings.linkTypes[link] == 'Field') && settings.linkParents[link] == name) {\n        for (var filter of runFilters) {\n          if (filter.columnName == settings.linkNames[link]) {\n            newRunFilters.push(filter);\n          }\n        }\n      }\n    }\n\n    setRunFilters(newRunFilters);\n  }\n\n  function buildSearchString(searchingFields, filteringFields) {\n    if (!searchingFields) searchingFields = searchFields;\n    if (!filteringFields) filteringFields = runFilters;\n    var filterString = \"\";\n\n    if (searchingFields) {\n      for (var key of Object.keys(searchingFields)) {\n        for (var field of searchingFields[key]) {\n          filterString += \" \" + field;\n        }\n      }\n    }\n\n    if (filteringFields) {\n      for (var filter of filteringFields) {\n        var filterVals = filter.values;\n\n        for (var val of filterVals) {\n          filterString += \" [\" + filter.columnName + \"].'\" + val + \"'\";\n        }\n      }\n    }\n\n    var searchString = renderContent.split(\"|\")[0] + filterString;\n    return searchString;\n  }\n\n  function setField(key, fields) {\n    // embedRef.current.trigger(HostEvent.Search, {\n    //   searchQuery: buildSearchString(fields, null),\n    //   executeSearch: true,\n    // });\n    setSearchFields({ ...searchFields,\n      [key]: fields\n    });\n  }\n\n  async function getUserContentv1(type, link, restURLParams) {\n    var content = [];\n\n    if (type == 'all' || type == 'liveboard') {\n      var liveboards = await getLiveboards(restURLParams);\n      content.push(...liveboards);\n    }\n\n    if (type == 'all' || type == 'answer') {\n      var answers = await getAnswers(restURLParams);\n      content.push(...answers);\n    }\n\n    setRestContent({ ...restContent,\n      [link]: content\n    });\n  }\n\n  async function getLiveboards(restURLParams) {\n    return await fetch(settings.URL + \"callosum/v1/tspublic/v1/metadata/list?type=PINBOARD_ANSWER_BOOK\" + restURLParams, {\n      credentials: 'include'\n    }).then(response => response.json()).then(data => data.headers);\n  }\n\n  async function getAnswers(restURLParams) {\n    return await fetch(settings.URL + \"callosum/v1/tspublic/v1/metadata/list?type=QUESTION_ANSWER_BOOK\" + restURLParams, {\n      credentials: 'include'\n    }).then(response => response.json()).then(data => data.headers);\n  }\n\n  function setFilter(newFilterObj) {\n    var filterObjs = runFilters;\n    var found = false;\n\n    for (var i = 0; i < filterObjs.length; i++) {\n      var filterObj = filterObjs[i];\n      if (!filterObj) continue;\n\n      if (filterObj.columnName == newFilterObj.columnName) {\n        filterObjs[i] = newFilterObj;\n        found = true;\n      }\n    }\n\n    if (!found) {\n      filterObjs.push(newFilterObj);\n    }\n\n    if (renderType == 'Liveboard') {\n      embedRef.current.trigger(HostEvent.UpdateRuntimeFilters, filterObjs);\n    } else {\n      setRunFilters(filterObjs);\n      setRenderKey(Date.now()); // embedRef.current.trigger(HostEvent.Search, {\n      //   searchQuery: buildSearchString(null,filterObjs)\n      // });\n    }\n  }\n\n  function onEmbedRendered() {\n    embedRef.current.on(EmbedEvent.VizPointDoubleClick, data => {\n      console.log('>>> called', data);\n      const event = new CustomEvent('popup', {\n        detail: {\n          data: data\n        }\n      });\n      window.dispatchEvent(event);\n    });\n    embedRef.current.on(EmbedEvent.VizPointClick, data => {\n      console.log('single click');\n    });\n    embedRef.current.on(EmbedEvent.CustomAction, payload => {\n      var data = payload.data.embedAnswerData.data[0].columnDataLite;\n      var alertString = \"Action Triggered: \" + payload.data.id;\n\n      for (var col in data) {\n        alertString += \"\\n\\n\" + data[col].dataValue.join(\", \");\n      }\n\n      alert(alertString);\n    });\n  }\n\n  var isHorizontal = settings.orientation == 'Horizontal';\n\n  if (settings.links) {\n    var linkContainers = [];\n    var topLevel = [];\n\n    for (var link of settings.links) {\n      if (!settings.linkParents[link] || settings.linkParents[link] == 'None') {\n        topLevel.push(link);\n      }\n    }\n\n    for (var link of topLevel) {\n      var childrenLinks = [];\n\n      if (settings.linkTypes[link] == 'Rest' && userContent) {\n        for (var contentItem of userContent) {\n          childrenLinks.push( /*#__PURE__*/_jsxDEV(LinkContainer, {\n            id: contentItem.id,\n            name: contentItem.name,\n            content: contentItem.id,\n            type: \"Answer\",\n            renderLink: renderLink,\n            isHorizontal: isHorizontal\n          }, contentItem.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 11\n          }, this));\n        }\n      }\n\n      for (var child of settings.links) {\n        if (settings.linkParents[child] == settings.linkNames[link]) {\n          childrenLinks.push( /*#__PURE__*/_jsxDEV(LinkContainer, {\n            id: child,\n            name: settings.linkNames[child],\n            content: settings.linkContents[child],\n            type: settings.linkTypes[child],\n            renderLink: renderLink,\n            isHorizontal: isHorizontal\n          }, child, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 11\n          }, this));\n        }\n      }\n\n      linkContainers.push( /*#__PURE__*/_jsxDEV(LinkContainer, {\n        id: link,\n        name: settings.linkNames[link],\n        content: settings.linkContents[link],\n        type: settings.linkTypes[link],\n        renderLink: renderLink,\n        children: childrenLinks,\n        isHorizontal: isHorizontal\n      }, link, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 25\n      }, this));\n    }\n  }\n\n  var filters = [];\n\n  if (settings.links) {\n    for (var link of settings.links) {\n      if ((settings.linkTypes[link] == 'Filter' || settings.linkTypes[link] == 'Field') && settings.linkParents[link] == renderName) {\n        var filterContent = settings.linkContents[link].split(\"|\");\n        var hasSelectAll = true;\n        var filterValues = filterContent[0].split(',');\n        var filterLabels = [];\n\n        if (settings.linkTypes[link] == 'Field') {\n          var filterOptions = [];\n\n          for (var val of filterValues) {\n            filterOptions.push(val.split(\":\")[0]);\n            filterLabels.push(val.split(\":\")[1]);\n          }\n\n          filterValues = filterOptions;\n        } else {\n          filterLabels = filterValues;\n        }\n\n        var filterName = settings.linkNames[link];\n\n        if (filterContent.length > 1) {\n          for (var i = 1; i < filterContent.length; i++) {\n            var prop = filterContent[i].split(\"=\")[0];\n            var val = filterContent[i].split(\"=\")[1];\n\n            if (prop == 'selectAll') {\n              if (val == 'false') {\n                hasSelectAll = false;\n              }\n            }\n          }\n        }\n\n        var filterType = 'Filter';\n\n        if (settings.linkTypes[link] == 'Field') {\n          filterType = 'Field';\n        }\n\n        var options = [];\n\n        for (var val in filterValues) {\n          options.push({\n            'value': filterValues[val],\n            'label': filterLabels[val]\n          });\n        }\n\n        if (selectedFilters[filterName]) {\n          filters.push( /*#__PURE__*/_jsxDEV(Filter, {\n            type: filterType,\n            setField: setField,\n            hasSelectAll: hasSelectAll,\n            filterName: filterName,\n            options: options,\n            setFilter: setFilter,\n            defaultValues: selectedFilters[filterName]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 22\n          }, this)); //ilters.push(<MultiSelect multi={true} hasSelectAll={hasSelectAll} value={selectedFilters[filterName]} options={options} placeholder={\"Select \"+filterName} onChange={setFilter} overrideStrings={overrideStrings}/>)\n        } else {\n          filters.push( /*#__PURE__*/_jsxDEV(Filter, {\n            type: filterType,\n            setField: setField,\n            hasSelectAll: hasSelectAll,\n            filterName: filterName,\n            options: options,\n            setFilter: setFilter\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 22\n          }, this)); //filters.push(<MultiSelect multi={true} hasSelectAll={hasSelectAll} options={options} placeholder={\"Select \"+filterName} onChange={setFilter} overrideStrings={overrideStrings}/>)\n        }\n      }\n    }\n  } //Set primary CSS variables for page\n\n\n  document.documentElement.style.setProperty('--primary-color', settings.primaryColor);\n  document.documentElement.style.setProperty('--secondary-color', settings.secondaryColor); //Style filter dropdown with CSS variables\n\n  if (!isHorizontal) {\n    document.documentElement.style.setProperty('--rmsc-p', '8px');\n    document.documentElement.style.setProperty('--rmsc-radius', '3px');\n    document.documentElement.style.setProperty('--rmsc-h', '30px');\n    document.documentElement.style.setProperty('--dropdown-width', '130px');\n    document.documentElement.style.setProperty('--dropdown-container-right-margin', '0px');\n    document.documentElement.style.setProperty('--dropdown-container-bottom-margin', '10px');\n    document.documentElement.style.setProperty('--dropdown-left-margin', '130px');\n    document.documentElement.style.setProperty('--dropdown-top-margin', '-240px');\n    document.documentElement.style.setProperty('--dropdown-top-margin', '-240px');\n    document.documentElement.style.setProperty('--dropdown-max-height', '240px');\n  } else {\n    document.documentElement.style.setProperty('--rmsc-p', '8px');\n    document.documentElement.style.setProperty('--rmsc-radius', '3px');\n    document.documentElement.style.setProperty('--rmsc-h', '30px');\n    document.documentElement.style.setProperty('--dropdown-width', '150px');\n    document.documentElement.style.setProperty('--dropdown-container-right-margin', '10px');\n    document.documentElement.style.setProperty('--dropdown-container-bottom-margin', '0px');\n    document.documentElement.style.setProperty('--dropdown-left-margin', '0px');\n    document.documentElement.style.setProperty('--dropdown-top-margin', '0px');\n    document.documentElement.style.setProperty('--dropdown-max-height', '500px');\n  }\n\n  var enabledActions = [];\n  var disabledActions = []; //Scan Properties\n\n  if (renderContent && (renderType == 'Liveboard' || renderType == 'Answer' || renderType == 'Search')) {\n    var contents = renderContent.split(\"|\");\n\n    if (contents.length > 1) {\n      for (var i = 1; i < contents.length; i++) {\n        var props = contents[i].split(\"=\");\n\n        if (props.length > 1) {\n          var prop = props[0];\n          var val = props[1];\n\n          if (prop == 'enableAction') {\n            enabledActions.push(Action[val.split(\"Action.\")[1]]);\n          }\n\n          if (prop == 'disableAction') {\n            disabledActions.push(Action[val.split(\"Action.\")[1]]);\n          }\n        }\n      }\n    }\n  }\n\n  var renderPage = /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 406,\n    columnNumber: 18\n  }, this);\n\n  if (!renderType && settings && settings.links) {\n    var firstLink = settings.links[0]; //renderLink(settings.linkTypes[firstLink],settings.linkContents[firstLink],settings.linkNames[firstLink])\n  }\n\n  if (renderType == 'Search') {\n    var renderContents = null;\n\n    if (renderContent && renderContent.length > 0) {\n      renderContents = renderContent.split(\"|\")[0].split(\",\");\n    }\n\n    renderPage = /*#__PURE__*/_jsxDEV(MemorizedSearchEmbed, {\n      enabledActions: enabledActions.length > 0 ? enabledActions : null,\n      disabledActions: disabledActions.length > 0 ? disabledActions : null,\n      dataSources: renderContents,\n      hideDataSources: true,\n      frameParams: {\n        width: '100%',\n        height: '100%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 16\n    }, this);\n  }\n\n  if (renderType == 'Liveboard') {\n    renderPage = /*#__PURE__*/_jsxDEV(LiveboardEmbed, {\n      ref: embedRef,\n      onLiveboardRendered: onEmbedRendered,\n      enabledActions: enabledActions.length > 0 ? enabledActions : null,\n      disabledActions: disabledActions.length > 0 ? disabledActions : null,\n      hideDataSources: true,\n      runtimeFilters: runFilters,\n      liveboardId: renderContent.split(\"|\")[0],\n      frameParams: {\n        width: '100%',\n        height: '100%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 16\n    }, this);\n  }\n\n  if (renderType == 'Answer') {\n    renderPage = /*#__PURE__*/_jsxDEV(MemorizedSearchEmbed, {\n      ref: embedRef,\n      enabledActions: enabledActions.length > 0 ? enabledActions : null,\n      disabledActions: disabledActions.length > 0 ? disabledActions : null,\n      onLoad: onEmbedRendered,\n      hideDataSources: true,\n      answerId: renderContent.split(\"|\")[0],\n      frameParams: {\n        width: '100%',\n        height: '100vh'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 16\n    }, this);\n  }\n\n  if (renderType == 'Search String') {\n    var searchString = buildSearchString();\n    console.log(\"init search String\", searchString);\n    var searchOptions = {\n      searchTokenString: searchString,\n      executeSearch: true\n    };\n    var dataSources = renderContent.split(\"|\")[1].split(\",\");\n    renderPage = /*#__PURE__*/_jsxDEV(SearchEmbed, {\n      ref: embedRef,\n      dataSources: dataSources,\n      hideDataSources: true,\n      searchOptions: searchOptions,\n      frameParams: {\n        width: '100%',\n        height: '100vh'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 16\n    }, this);\n  }\n\n  if (renderType == 'App') {\n    renderPage = /*#__PURE__*/_jsxDEV(AppEmbed, {\n      pageId: renderContent,\n      frameParams: {\n        width: '100%',\n        height: '100%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 16\n    }, this);\n  }\n\n  if (renderType == 'URL') {\n    renderPage = /*#__PURE__*/_jsxDEV(\"iframe\", {\n      style: {\n        width: '100%',\n        height: '100%',\n        border: 'none'\n      },\n      src: renderContent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 16\n    }, this);\n  }\n\n  document.title = settings.name;\n\n  function openTS() {\n    window.open(settings.URL, '_blank');\n  }\n\n  function openGit() {\n    window.open('https://github.com/hannsta/TSE-Demo-Builder', '_blank');\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: isHorizontal ? horizontalContainer : verticalContainer,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: isHorizontal ? topMenu : leftMenu,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: isHorizontal ? logoImageHolderHorizontal : logoImageHolderVertical,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: settings.logoImage,\n          style: isHorizontal ? horizontalLogoImage : verticalLogoImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(NotePopup, {\n          popupVisible: popupVisible,\n          togglePopupVisible: togglePopupVisible,\n          popupConfig: popupConfig,\n          primaryColor: settings.primaryColor,\n          secondaryColor: settings.secondaryColor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 9\n      }, this), linkContainers, /*#__PURE__*/_jsxDEV(\"div\", {\n        style: isHorizontal ? horizontalIcons : verticalIcons,\n        children: [!isHorizontal ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: '10px'\n          },\n          children: filters\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 28\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'center',\n            marginTop: '15px',\n            marginBottom: '10px'\n          },\n          children: [isHorizontal ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'row',\n              padding: '10px'\n            },\n            children: filters\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 20\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: showSettings,\n            style: {\n              marginRight: '5px'\n            },\n            children: /*#__PURE__*/_jsxDEV(SettingsIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '30px',\n              height: '30px',\n              marginRight: '5px'\n            },\n            onClick: openTS,\n            children: /*#__PURE__*/_jsxDEV(TSLogo, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '22px',\n              height: '22px',\n              marginRight: '5px'\n            },\n            onClick: openGit,\n            children: /*#__PURE__*/_jsxDEV(GitHubLogo, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"TSContainer\",\n      style: {\n        height: '100%'\n      },\n      children: renderPage\n    }, renderKey, false, {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 477,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Content, \"+lvyXXgzB/+2cj1S25JdaCJaacU=\", false, function () {\n  return [useEmbedRef];\n});\n\n_c = Content;\n\nfunction LinkContainer(props) {\n  _s2();\n\n  const {\n    id,\n    name,\n    content,\n    type,\n    renderLink,\n    children,\n    isHorizontal\n  } = props;\n  const [hoverVisible, setHoverVisible] = useState('');\n\n  function handleLinkClick() {\n    renderLink(type, content, name);\n  }\n\n  var isDropdown = false;\n\n  if (children) {\n    if (children.length > 0) {\n      isDropdown = true;\n    }\n  }\n\n  function handleMouseEnter() {\n    setHoverVisible(true);\n  }\n\n  function handleMouseLeave() {\n    setHoverVisible(false);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: isHorizontal ? horizontalLink : null,\n    children: isDropdown ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: isHorizontal ? contentLinkHorizontal : contentLinkVertical,\n      className: \"contentLink\",\n      onMouseEnter: handleMouseLeave,\n      onMouseLeave: handleMouseEnter,\n      children: [name, hoverVisible ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: isHorizontal ? hoverMenuHorizontal : hoverMenuVertical,\n        className: \"hoverMenu\",\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 547,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: isHorizontal ? contentLinkHorizontal : contentLinkVertical,\n      className: \"contentLink\",\n      onClick: handleLinkClick,\n      children: name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 558,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 543,\n    columnNumber: 5\n  }, this);\n} // CSS to be used for vertical and horizontal alignments\n\n\n_s2(LinkContainer, \"beTgb2qkNb07YGKRGhzeMR3paEs=\");\n\n_c2 = LinkContainer;\nconst leftMenu = {\n  background: 'var(--primary-color)',\n  color: 'var(--secondary-color)',\n  borderRight: '1px solid #dddddd',\n  width: '150px',\n  height: '100%',\n  display: 'flex',\n  flexDirection: 'column',\n  boxShadow: '0px 0px 15px #dddddd'\n};\nconst topMenu = {\n  background: 'var(--primary-color)',\n  color: 'var(--secondary-color)',\n  borderBottom: '1px solid #dddddd',\n  width: '100%',\n  height: '75px',\n  minHeight: '75px',\n  display: 'flex',\n  flexDirection: 'row',\n  boxShadow: '0px 0px 15px #dddddd'\n};\nconst verticalContainer = {\n  display: 'flex',\n  flexDirection: 'row',\n  width: '100%',\n  height: '100vh',\n  overflow: 'hidden'\n};\nconst horizontalContainer = {\n  display: 'flex',\n  flexDirection: 'column',\n  width: '100%',\n  height: '100vh',\n  overflow: 'hidden'\n};\nconst logoImageHolderVertical = {\n  height: '150px',\n  width: '150px',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  marginTop: '20px',\n  marginBottom: '20px'\n};\nconst logoImageHolderHorizontal = {\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  marginLeft: '20px',\n  marginRight: '100px'\n};\nconst verticalLogoImage = {\n  width: '75px'\n};\nconst horizontalLogoImage = {\n  height: '50px'\n};\nconst horizontalIcons = {\n  display: 'flex',\n  flexDirection: 'column',\n  justifyContent: 'center',\n  alignItems: 'flex-end',\n  width: '100%',\n  marginRight: '15px'\n};\nconst verticalIcons = {\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'flex-end',\n  height: '100vh'\n};\nconst contentLinkVertical = {\n  fontSize: '14px',\n  fontFamily: \"'Open Sans', sans-serif\",\n  paddingLeft: '15px',\n  paddingTop: '10px',\n  paddingBottom: '10px',\n  marginBottom: '5px'\n};\nconst contentLinkHorizontal = {\n  maxWidth: '100px',\n  height: '50px',\n  display: 'flex',\n  alignItems: 'center',\n  flexShrink: 0,\n  paddingLeft: '10px',\n  paddingRight: '25px'\n};\nconst horizontalLink = {\n  display: 'flex',\n  alignItems: 'flex-end',\n  flexShrink: 0\n};\nconst hoverMenuHorizontal = {\n  position: 'absolute',\n  width: '150px',\n  top: '75px',\n  marginLeft: '-10px'\n};\nconst hoverMenuVertical = {\n  position: 'absolute',\n  width: '200px',\n  paddingRight: '10px',\n  left: '150px',\n  marginTop: '-29px'\n};\n\nfunction Filter(props) {\n  _s3();\n\n  const {\n    hasSelectAll,\n    filterName,\n    options,\n    type,\n    setFilter,\n    setField,\n    defaultValues\n  } = props;\n  const [selectedFilter, setSelectedFilter] = useState('');\n  useEffect(() => {\n    if (defaultValues) {\n      setSelectedFilter(defaultValues);\n    } else {\n      setSelectedFilter([]);\n    }\n  }, []);\n  var overrideStrings = {\n    \"allItemsAreSelected\": \"All \" + filterName,\n    \"search\": \"Search \" + filterName,\n    \"selectAll\": \"Select All\",\n    \"selectAllFiltered\": \"Select All (Filtered)\",\n    \"selectSomeItems\": filterName,\n    \"create\": \"Create\"\n  };\n\n  function handleFieldChange(e) {\n    setSelectedFilter(e);\n    var filterVals = [];\n\n    for (var i = 0; i < e.length; i++) {\n      filterVals.push(e[i].value);\n    }\n\n    setField(filterName, filterVals);\n  }\n\n  function handleFilterChange(e) {\n    var filterVals = [];\n\n    for (var i = 0; i < e.length; i++) {\n      filterVals.push(e[i].label);\n    }\n\n    var filtersObj = {\n      columnName: filterName,\n      operator: 'IN',\n      values: filterVals\n    };\n    setSelectedFilter(e);\n    setFilter(filtersObj);\n  }\n\n  return /*#__PURE__*/_jsxDEV(MultiSelect, {\n    multi: true,\n    hasSelectAll: hasSelectAll,\n    value: selectedFilter,\n    options: options,\n    placeholder: \"Select \" + filterName,\n    onChange: type == 'Field' ? handleFieldChange : handleFilterChange,\n    overrideStrings: overrideStrings\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 727,\n    columnNumber: 3\n  }, this);\n}\n\n_s3(Filter, \"FTpVxe0njooh09po36eNh/WqCbI=\");\n\n_c3 = Filter;\n\nfunction UserIcon() {\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"-2 -2 24 24\",\n    width: \"24\",\n    fill: \"currentColor\",\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M10 20C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0-14a4 4 0 0 1 4 4v2a4 4 0 1 1-8 0V8a4 4 0 0 1 4-4zm0 2a2 2 0 0 0-2 2v2a2 2 0 1 0 4 0V8a2 2 0 0 0-2-2zM5.91 16.876a8.033 8.033 0 0 1-1.58-1.232 5.57 5.57 0 0 1 2.204-1.574 1 1 0 1 1 .733 1.86c-.532.21-.993.538-1.358.946zm8.144.022a3.652 3.652 0 0 0-1.41-.964 1 1 0 1 1 .712-1.868 5.65 5.65 0 0 1 2.284 1.607 8.032 8.032 0 0 1-1.586 1.225z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 739,\n      columnNumber: 103\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 739,\n    columnNumber: 10\n  }, this);\n}\n\n_c4 = UserIcon;\n\nfunction SettingsIcon() {\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"-2 -2 24 24\",\n    width: \"24\",\n    fill: \"currentColor\",\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M20 8.163A2.106 2.106 0 0 0 18.926 10c0 .789.433 1.476 1.074 1.837l-.717 2.406a2.105 2.105 0 0 0-2.218 3.058l-2.062 1.602A2.104 2.104 0 0 0 11.633 20l-3.29-.008a2.104 2.104 0 0 0-3.362-1.094l-2.06-1.615A2.105 2.105 0 0 0 .715 14.24L0 11.825A2.106 2.106 0 0 0 1.051 10C1.051 9.22.63 8.54 0 8.175L.715 5.76a2.105 2.105 0 0 0 2.207-3.043L4.98 1.102A2.104 2.104 0 0 0 8.342.008L11.634 0a2.104 2.104 0 0 0 3.37 1.097l2.06 1.603a2.105 2.105 0 0 0 2.218 3.058L20 8.162zM14.823 3.68c0-.063.002-.125.005-.188l-.08-.062a4.103 4.103 0 0 1-4.308-1.428l-.904.002a4.1 4.1 0 0 1-4.29 1.43l-.095.076A4.108 4.108 0 0 1 2.279 7.6a4.1 4.1 0 0 1 .772 2.399c0 .882-.28 1.715-.772 2.4a4.108 4.108 0 0 1 2.872 4.09l.096.075a4.104 4.104 0 0 1 4.289 1.43l.904.002a4.1 4.1 0 0 1 4.307-1.428l.08-.062A4.108 4.108 0 0 1 17.7 12.4a4.102 4.102 0 0 1-.773-2.4c0-.882.281-1.716.773-2.4a4.108 4.108 0 0 1-2.876-3.919zM10 14a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0-2a2 2 0 1 0 0-4 2 2 0 0 0 0 4z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 742,\n      columnNumber: 103\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 742,\n    columnNumber: 10\n  }, this);\n}\n\n_c5 = SettingsIcon;\n\nfunction TSLogo() {\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    focusable: \"false\",\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 512 512\",\n    children: /*#__PURE__*/_jsxDEV(\"g\", {\n      fill: \"currentColor\",\n      \"fill-rule\": \"evenodd\",\n      children: /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M328.33 378.112c0-20.677 16.767-37.445 37.444-37.445 20.684 0 37.448 16.768 37.448 37.445 0 20.68-16.764 37.448-37.448 37.448-20.677 0-37.445-16.768-37.445-37.448M106 209.61h100.634v203.608h18.72V209.61h18.724v203.608h18.724V209.61h18.72v203.608h18.725V209.61H400.88v-18.724H106v18.724M106 172.165h294.88v-18.724H106zM106 134.72h294.88V116H106z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 746,\n        columnNumber: 160\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 746,\n      columnNumber: 117\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 746,\n    columnNumber: 10\n  }, this);\n}\n\n_c6 = TSLogo;\n\nfunction GitHubLogo() {\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 256 250\",\n    version: \"1.1\",\n    preserveAspectRatio: \"xMidYMid\",\n    children: /*#__PURE__*/_jsxDEV(\"g\", {\n      children: /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M128.00106,0 C57.3172926,0 0,57.3066942 0,128.00106 C0,184.555281 36.6761997,232.535542 87.534937,249.460899 C93.9320223,250.645779 96.280588,246.684165 96.280588,243.303333 C96.280588,240.251045 96.1618878,230.167899 96.106777,219.472176 C60.4967585,227.215235 52.9826207,204.369712 52.9826207,204.369712 C47.1599584,189.574598 38.770408,185.640538 38.770408,185.640538 C27.1568785,177.696113 39.6458206,177.859325 39.6458206,177.859325 C52.4993419,178.762293 59.267365,191.04987 59.267365,191.04987 C70.6837675,210.618423 89.2115753,204.961093 96.5158685,201.690482 C97.6647155,193.417512 100.981959,187.77078 104.642583,184.574357 C76.211799,181.33766 46.324819,170.362144 46.324819,121.315702 C46.324819,107.340889 51.3250588,95.9223682 59.5132437,86.9583937 C58.1842268,83.7344152 53.8029229,70.715562 60.7532354,53.0843636 C60.7532354,53.0843636 71.5019501,49.6441813 95.9626412,66.2049595 C106.172967,63.368876 117.123047,61.9465949 128.00106,61.8978432 C138.879073,61.9465949 149.837632,63.368876 160.067033,66.2049595 C184.49805,49.6441813 195.231926,53.0843636 195.231926,53.0843636 C202.199197,70.715562 197.815773,83.7344152 196.486756,86.9583937 C204.694018,95.9223682 209.660343,107.340889 209.660343,121.315702 C209.660343,170.478725 179.716133,181.303747 151.213281,184.472614 C155.80443,188.444828 159.895342,196.234518 159.895342,208.176593 C159.895342,225.303317 159.746968,239.087361 159.746968,243.303333 C159.746968,246.709601 162.05102,250.70089 168.53925,249.443941 C219.370432,232.499507 256,184.536204 256,128.00106 C256,57.3066942 198.691187,0 128.00106,0 Z M47.9405593,182.340212 C47.6586465,182.976105 46.6581745,183.166873 45.7467277,182.730227 C44.8183235,182.312656 44.2968914,181.445722 44.5978808,180.80771 C44.8734344,180.152739 45.876026,179.97045 46.8023103,180.409216 C47.7328342,180.826786 48.2627451,181.702199 47.9405593,182.340212 Z M54.2367892,187.958254 C53.6263318,188.524199 52.4329723,188.261363 51.6232682,187.366874 C50.7860088,186.474504 50.6291553,185.281144 51.2480912,184.70672 C51.8776254,184.140775 53.0349512,184.405731 53.8743302,185.298101 C54.7115892,186.201069 54.8748019,187.38595 54.2367892,187.958254 Z M58.5562413,195.146347 C57.7719732,195.691096 56.4895886,195.180261 55.6968417,194.042013 C54.9125733,192.903764 54.9125733,191.538713 55.713799,190.991845 C56.5086651,190.444977 57.7719732,190.936735 58.5753181,192.066505 C59.3574669,193.22383 59.3574669,194.58888 58.5562413,195.146347 Z M65.8613592,203.471174 C65.1597571,204.244846 63.6654083,204.03712 62.5716717,202.981538 C61.4524999,201.94927 61.1409122,200.484596 61.8446341,199.710926 C62.5547146,198.935137 64.0575422,199.15346 65.1597571,200.200564 C66.2704506,201.230712 66.6095936,202.705984 65.8613592,203.471174 Z M75.3025151,206.281542 C74.9930474,207.284134 73.553809,207.739857 72.1039724,207.313809 C70.6562556,206.875043 69.7087748,205.700761 70.0012857,204.687571 C70.302275,203.678621 71.7478721,203.20382 73.2083069,203.659543 C74.6539041,204.09619 75.6035048,205.261994 75.3025151,206.281542 Z M86.046947,207.473627 C86.0829806,208.529209 84.8535871,209.404622 83.3316829,209.4237 C81.8013,209.457614 80.563428,208.603398 80.5464708,207.564772 C80.5464708,206.498591 81.7483088,205.631657 83.2786917,205.606221 C84.8005962,205.576546 86.046947,206.424403 86.046947,207.473627 Z M96.6021471,207.069023 C96.7844366,208.099171 95.7267341,209.156872 94.215428,209.438785 C92.7295577,209.710099 91.3539086,209.074206 91.1652603,208.052538 C90.9808515,206.996955 92.0576306,205.939253 93.5413813,205.66582 C95.054807,205.402984 96.4092596,206.021919 96.6021471,207.069023 Z\",\n        fill: \"currentColor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 749,\n        columnNumber: 147\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 749,\n      columnNumber: 144\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 749,\n    columnNumber: 10\n  }, this);\n}\n\n_c7 = GitHubLogo;\nexport default Content;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"Content\");\n$RefreshReg$(_c2, \"LinkContainer\");\n$RefreshReg$(_c3, \"Filter\");\n$RefreshReg$(_c4, \"UserIcon\");\n$RefreshReg$(_c5, \"SettingsIcon\");\n$RefreshReg$(_c6, \"TSLogo\");\n$RefreshReg$(_c7, \"GitHubLogo\");","map":{"version":3,"sources":["/Users/nathan.schroeder/Documents/dev/TSIntegrationDemo/ts-integration-demo/src/Content.js"],"names":["React","useState","useEffect","setState","init","AuthType","Page","EmbedEvent","Action","HostEvent","SearchEmbed","LiveboardEmbed","AppEmbed","useEmbedRef","MultiSelect","NotePopup","Content","props","settings","showSettings","thoughtspot_URL","renderType","setRenderType","renderContent","setRenderContent","renderName","setRenderName","runFilters","setRunFilters","selectedFilters","setSelectedFilters","filterKey","setFilterKey","renderKey","setRenderKey","searchFields","setSearchFields","embedRef","popupVisible","setPopupVisible","popupConfig","setPopupConfig","token","setToken","restContent","setRestContent","MemorizedSearchEmbed","memo","togglePopupVisible","URL","console","log","thoughtSpotHost","authType","None","err","alert","getUserContentv1","username","defaultFilters","links","filterObjs","defaultsFound","link","linkTypes","filterContent","linkContents","split","filterName","linkNames","length","i","prop","val","filterObj","columnName","operator","values","label","value","push","type","restURLParams","params","catType","param","paramKey","paramVal","JSON","stringify","toUpperCase","renderLink","content","name","Date","now","newRunFilters","linkParents","filter","buildSearchString","searchingFields","filteringFields","filterString","key","Object","keys","field","filterVals","searchString","setField","fields","liveboards","getLiveboards","answers","getAnswers","fetch","credentials","then","response","json","data","headers","setFilter","newFilterObj","found","current","trigger","UpdateRuntimeFilters","onEmbedRendered","on","VizPointDoubleClick","event","CustomEvent","detail","window","dispatchEvent","VizPointClick","CustomAction","payload","embedAnswerData","columnDataLite","alertString","id","col","dataValue","join","isHorizontal","orientation","linkContainers","topLevel","childrenLinks","userContent","contentItem","child","filters","hasSelectAll","filterValues","filterLabels","filterOptions","filterType","options","document","documentElement","style","setProperty","primaryColor","secondaryColor","enabledActions","disabledActions","contents","renderPage","firstLink","renderContents","width","height","searchOptions","searchTokenString","executeSearch","dataSources","border","title","openTS","open","openGit","horizontalContainer","verticalContainer","topMenu","leftMenu","logoImageHolderHorizontal","logoImageHolderVertical","logoImage","horizontalLogoImage","verticalLogoImage","horizontalIcons","verticalIcons","margin","display","flexDirection","alignItems","marginTop","marginBottom","padding","marginRight","LinkContainer","children","hoverVisible","setHoverVisible","handleLinkClick","isDropdown","handleMouseEnter","handleMouseLeave","horizontalLink","contentLinkHorizontal","contentLinkVertical","hoverMenuHorizontal","hoverMenuVertical","background","color","borderRight","boxShadow","borderBottom","minHeight","overflow","justifyContent","marginLeft","fontSize","fontFamily","paddingLeft","paddingTop","paddingBottom","maxWidth","flexShrink","paddingRight","position","top","left","Filter","defaultValues","selectedFilter","setSelectedFilter","overrideStrings","handleFieldChange","e","handleFilterChange","filtersObj","UserIcon","SettingsIcon","TSLogo","GitHubLogo"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, setState } from 'react';\nimport { init,  AuthType, Page, EmbedEvent, Action, HostEvent} from '@thoughtspot/visual-embed-sdk';\nimport { SearchEmbed, LiveboardEmbed, AppEmbed, useEmbedRef } from '@thoughtspot/visual-embed-sdk/react';\nimport { MultiSelect } from \"react-multi-select-component\";\nimport NotePopup from './NotePopup';\n\nfunction Content(props) {\nconst {\n  settings,\n  showSettings\n} = props\nconst thoughtspot_URL = \"https://se-thoughtspot-cloud.thoughtspot.cloud/#/\" \n\nconst [renderType, setRenderType] = useState('')\nconst [renderContent, setRenderContent] = useState('')\nconst [renderName, setRenderName] = useState('')\nconst [runFilters, setRunFilters] = useState('')\nconst [selectedFilters, setSelectedFilters] = useState('')\nconst [filterKey, setFilterKey] = useState('')\nconst [renderKey, setRenderKey] = useState('')\nconst [searchFields , setSearchFields] = useState('')\nconst embedRef = useEmbedRef();\nconst [popupVisible, setPopupVisible] = useState('')\nconst [popupConfig, setPopupConfig] = useState('')\nconst [token,setToken]=useState('')\nconst [restContent,setRestContent] = useState('')\n\nconst MemorizedSearchEmbed = React.memo(SearchEmbed);\n\nfunction togglePopupVisible(){\n  setPopupVisible(!popupVisible)\n}\n\nuseEffect(() => {\n  if (settings.URL){\n    console.log(settings.URL)\n    try {\n      init({\n        thoughtSpotHost: settings.URL,\n        authType: AuthType.None,\n      });\n    }\n    catch(err){\n      alert(\"could not connect to thoughtspot\")\n    }\n    getUserContentv1()\n    if (settings.username){\n      \n      //getToken()\n    }\n  }\n\n  //Setup Default Filters && REST Lists\n  var defaultFilters = {}\n  if (settings.links){\n    var filterObjs = []\n    var defaultsFound = false;\n    for (var link of settings.links){\n      if (settings.linkTypes[link]=='Filter'){\n        var filterContent = settings.linkContents[link].split(\"|\")\n        var filterName = settings.linkNames[link]\n        if (filterContent.length>1){\n          for (var i=1;i<filterContent.length;i++){\n            var prop = filterContent[i].split(\"=\")[0]\n            var val  = filterContent[i].split(\"=\")[1]\n            if (prop=='default'){\n              var filterObj  = {\n                columnName: filterName,\n                operator: 'IN',\n                values: [val]\n              }\n              defaultFilters[filterName] = [{label:val,value:val}]\n              filterObjs.push(filterObj)\n              defaultsFound=true;\n            }\n          }\n        }\n      }\n      if (settings.linkTypes[link]=='Rest'){\n        var type = \"all\"\n        var restURLParams = \"\" \n        var params = settings.linkContents[link].split(\"|\")\n        var catType = \"ALL\"\n        for (var param of params){\n          var paramKey = param.split(\"=\")[0]\n          var paramVal = param.split(\"=\")[1]\n          if (paramKey==\"type\"){\n            type = paramVal\n          }\n          if (paramKey==\"sort\"){\n            restURLParams+=\"&sort=\"+paramVal\n          }\n          if (paramKey==\"tags\"){\n            restURLParams+=\"&tagname=\"+JSON.stringify(paramVal.split(\",\"));\n          }\n          if (paramKey==\"category\"){\n            catType = paramVal.toUpperCase();\n          }     \n          restURLParams+=\"&category=\"+catType;     \n          getUserContentv1(type,link,restURLParams)\n        }\n\n      }\n    }\n  }\n  if (defaultsFound){\n    setRunFilters(filterObjs);\n    setSelectedFilters(defaultFilters)\n  } \n  if (!runFilters && !defaultsFound) setRunFilters([])\n  if (!selectedFilters && !defaultsFound)  setSelectedFilters({})\n}, [])\n\nfunction renderLink(type,content,name){\n  setRenderContent(content);\n  setRenderType(type);\n  setRenderName(name);\n  setRenderKey(Date.now())\n  var newRunFilters = []\n    \n  //Only keep filter values if that filter exists in the new content\n  for (var link of settings.links){\n    if ((settings.linkTypes[link]=='Filter' || settings.linkTypes[link]=='Field') && settings.linkParents[link]==name){ \n      for (var filter of runFilters){\n          if (filter.columnName == settings.linkNames[link]){\n            newRunFilters.push(filter)\n          }\n      }\n    }\n  }\n  setRunFilters(newRunFilters)\n}\nfunction buildSearchString(searchingFields,filteringFields){\n  if (!searchingFields) searchingFields = searchFields\n  if (!filteringFields) filteringFields = runFilters\n\n  var filterString = \"\"\n  if (searchingFields){\n    for (var key of Object.keys(searchingFields)){\n      for (var field of searchingFields[key]){\n        filterString+=\" \"+field\n    } \n    }\n  }\n\n  if (filteringFields){\n    for (var filter of filteringFields){\n      var filterVals = filter.values\n      for (var val of filterVals){\n        filterString+=\" [\"+filter.columnName+\"].'\"+val+\"'\"\n      }\n    }\n  }\n  var searchString = renderContent.split(\"|\")[0]+filterString\n  return searchString\n}\n\n\nfunction setField(key,fields){\n  // embedRef.current.trigger(HostEvent.Search, {\n  //   searchQuery: buildSearchString(fields, null),\n  //   executeSearch: true,\n\n  // });\n  setSearchFields({ ...searchFields, [key]: fields });\n\n}\n\nasync function getUserContentv1(type,link,restURLParams){\n  var content = []\n  if (type=='all' || type=='liveboard'){\n    var liveboards = await getLiveboards(restURLParams);\n    content.push(...liveboards)\n  }\n  if (type=='all' || type=='answer'){\n    var answers = await getAnswers(restURLParams)\n    content.push(...answers)\n  }\n  setRestContent({ ...restContent, [link]: content })\n}\nasync function getLiveboards(restURLParams){\n  return await fetch(settings.URL+\"callosum/v1/tspublic/v1/metadata/list?type=PINBOARD_ANSWER_BOOK\"+restURLParams,\n  {\n    credentials: 'include',\n  })\n  .then(response => response.json()).then(\n    data => data.headers)\n}\nasync function getAnswers(restURLParams){\n  return await fetch(settings.URL+\"callosum/v1/tspublic/v1/metadata/list?type=QUESTION_ANSWER_BOOK\"+restURLParams,\n  {\n    credentials: 'include',\n  })\n  .then(response => response.json()).then(\n    data => data.headers)\n}\n\nfunction setFilter(newFilterObj){\n  var filterObjs = runFilters;\n  var found = false;\n  for (var i=0;i<filterObjs.length;i++){\n    var filterObj = filterObjs[i]\n    if (!filterObj) continue;\n    if (filterObj.columnName == newFilterObj.columnName){\n      filterObjs[i] = newFilterObj\n      found = true;\n    }\n  }\n  if (!found){\n    filterObjs.push(newFilterObj)\n  }\n  if (renderType=='Liveboard'){\n    embedRef.current.trigger(HostEvent.UpdateRuntimeFilters, filterObjs);\n  }else{\n    setRunFilters(filterObjs);\n    setRenderKey(Date.now())\n\n    // embedRef.current.trigger(HostEvent.Search, {\n    //   searchQuery: buildSearchString(null,filterObjs)\n    // });\n  }\n\n}\nfunction onEmbedRendered(){\n  embedRef.current.on(EmbedEvent.VizPointDoubleClick, (data) => {\n      console.log('>>> called', data);\n      const event = new CustomEvent('popup', {detail: {data: data}});\n      window.dispatchEvent(event)\n  })\n  embedRef.current.on(EmbedEvent.VizPointClick, (data) => {\n    console.log('single click');\n  })\n  embedRef.current.on(EmbedEvent.CustomAction, (payload) => {\n    \n    var data = payload.data.embedAnswerData.data[0].columnDataLite\n    var alertString = \"Action Triggered: \"+ payload.data.id\n    for (var col in data){\n      alertString+= \"\\n\\n\"+data[col].dataValue.join(\", \")\n    }\n    alert(alertString);\n  })\n}\n\nvar isHorizontal = (settings.orientation=='Horizontal') \n\nif (settings.links){\n  var linkContainers = []\n  var topLevel = []\n  for (var link of settings.links){\n    if (!settings.linkParents[link] || settings.linkParents[link]=='None'){\n      topLevel.push(link)\n    }\n  }\n  for (var link of topLevel){\n    var childrenLinks = []\n    if (settings.linkTypes[link]=='Rest' && userContent){\n      for (var contentItem of userContent){\n        childrenLinks.push(\n          <LinkContainer\n          key={contentItem.id}\n          id={contentItem.id}\n          name={contentItem.name}\n          content={contentItem.id}\n          type=\"Answer\"\n          renderLink={renderLink}\n          isHorizontal={isHorizontal}\n        />\n        )       \n      }\n    }\n\n    for (var child of settings.links){\n      if (settings.linkParents[child]==settings.linkNames[link]){\n        childrenLinks.push(\n          <LinkContainer\n          key={child}\n          id={child}\n          name={settings.linkNames[child]}\n          content={settings.linkContents[child]}\n          type={settings.linkTypes[child]}\n          renderLink={renderLink}\n          isHorizontal={isHorizontal}\n        />\n        )\n      }\n    }\n    linkContainers.push(<LinkContainer\n      key={link}\n      id={link}\n      name={settings.linkNames[link]}\n      content={settings.linkContents[link]}\n      type={settings.linkTypes[link]}\n      renderLink={renderLink}\n      children={childrenLinks}\n      isHorizontal={isHorizontal}\n    />)\n  }\n}\nvar filters = []\nif (settings.links){\n  for (var link of settings.links){\n    if ((settings.linkTypes[link]=='Filter' || settings.linkTypes[link]=='Field') && settings.linkParents[link]==renderName){\n      var filterContent = settings.linkContents[link].split(\"|\")\n      var  hasSelectAll = true;\n      var filterValues = filterContent[0].split(',')\n      var filterLabels = []\n      \n      if (settings.linkTypes[link]=='Field'){\n        var filterOptions = []\n        for (var val of filterValues){\n          filterOptions.push(val.split(\":\")[0])\n          filterLabels.push(val.split(\":\")[1])\n        }\n        filterValues = filterOptions\n      }else{\n        filterLabels = filterValues\n      }\n      var filterName = settings.linkNames[link]\n      if (filterContent.length>1){\n        for (var i=1;i<filterContent.length;i++){\n          var prop = filterContent[i].split(\"=\")[0]\n          var val  = filterContent[i].split(\"=\")[1]\n          if (prop=='selectAll'){\n            if (val=='false'){\n              hasSelectAll=false;  \n            }\n          }\n        }\n      }\n      var filterType = 'Filter'\n      if (settings.linkTypes[link]=='Field'){\n        filterType='Field'\n      }\n      var options = []\n      for (var val in filterValues){\n        options.push({'value':filterValues[val],'label':filterLabels[val]})\n      }\n      \n      if (selectedFilters[filterName]){\n        filters.push(<Filter type={filterType} setField={setField} hasSelectAll={hasSelectAll} filterName={filterName} options={options} setFilter={setFilter} defaultValues={selectedFilters[filterName]}></Filter>)\n        //ilters.push(<MultiSelect multi={true} hasSelectAll={hasSelectAll} value={selectedFilters[filterName]} options={options} placeholder={\"Select \"+filterName} onChange={setFilter} overrideStrings={overrideStrings}/>)\n      }else{\n        filters.push(<Filter type={filterType} setField={setField}  hasSelectAll={hasSelectAll} filterName={filterName} options={options} setFilter={setFilter}></Filter>)\n        //filters.push(<MultiSelect multi={true} hasSelectAll={hasSelectAll} options={options} placeholder={\"Select \"+filterName} onChange={setFilter} overrideStrings={overrideStrings}/>)\n      }\n      \n    }\n  }\n}\n\n//Set primary CSS variables for page\n\ndocument.documentElement.style.setProperty('--primary-color', settings.primaryColor);\ndocument.documentElement.style.setProperty('--secondary-color', settings.secondaryColor);\n\n//Style filter dropdown with CSS variables\nif (!isHorizontal){\n  document.documentElement.style.setProperty('--rmsc-p', '8px');\n  document.documentElement.style.setProperty('--rmsc-radius', '3px');\n  document.documentElement.style.setProperty('--rmsc-h', '30px');\n  document.documentElement.style.setProperty('--dropdown-width', '130px');\n  document.documentElement.style.setProperty('--dropdown-container-right-margin', '0px');\n  document.documentElement.style.setProperty('--dropdown-container-bottom-margin', '10px');\n  document.documentElement.style.setProperty('--dropdown-left-margin', '130px');\n  document.documentElement.style.setProperty('--dropdown-top-margin', '-240px');\n  document.documentElement.style.setProperty('--dropdown-top-margin', '-240px');\n  document.documentElement.style.setProperty('--dropdown-max-height', '240px');\n\n}else{\n  document.documentElement.style.setProperty('--rmsc-p', '8px');\n  document.documentElement.style.setProperty('--rmsc-radius', '3px');\n  document.documentElement.style.setProperty('--rmsc-h', '30px');\n  document.documentElement.style.setProperty('--dropdown-width', '150px');\n  document.documentElement.style.setProperty('--dropdown-container-right-margin', '10px');\n  document.documentElement.style.setProperty('--dropdown-container-bottom-margin', '0px');\n  document.documentElement.style.setProperty('--dropdown-left-margin', '0px');\n  document.documentElement.style.setProperty('--dropdown-top-margin', '0px');\n  document.documentElement.style.setProperty('--dropdown-max-height', '500px');\n\n}\n\nvar enabledActions = []\nvar disabledActions = []\n\n//Scan Properties\nif (renderContent && (renderType=='Liveboard' || renderType=='Answer' || renderType=='Search')){\n  var contents = renderContent.split(\"|\")\n  if (contents.length>1){\n    for (var i=1;i<contents.length;i++){\n      var props = contents[i].split(\"=\");\n      if (props.length>1){\n        var prop = props[0]\n        var val = props[1]\n        if (prop == 'enableAction'){\n          enabledActions.push(Action[val.split(\"Action.\")[1]])\n        }\n        if (prop == 'disableAction'){\n          disabledActions.push(Action[val.split(\"Action.\")[1]])\n        }\n      }\n    }\n  }\n}\n\n\nvar renderPage = <div></div>\nif (!renderType && settings && settings.links){\n  var firstLink =  settings.links[0]\n  //renderLink(settings.linkTypes[firstLink],settings.linkContents[firstLink],settings.linkNames[firstLink])\n}\nif (renderType=='Search'){\n  var renderContents=null\n  if (renderContent && renderContent.length>0){\n    renderContents = renderContent.split(\"|\")[0].split(\",\")\n  }\n  renderPage = <MemorizedSearchEmbed \n      enabledActions={enabledActions.length>0 ? enabledActions : null} \n      disabledActions={disabledActions.length>0 ? disabledActions : null} \n      dataSources={renderContents} \n      hideDataSources={true} \n      frameParams={{width:'100%',height:'100%'}}\n  />\n}\nif (renderType=='Liveboard'){\n  renderPage = <LiveboardEmbed \n      ref={embedRef} \n      onLiveboardRendered = {onEmbedRendered}\n      enabledActions={enabledActions.length>0 ? enabledActions : null} \n      disabledActions={disabledActions.length>0 ? disabledActions : null}  \n      hideDataSources={true}  \n      runtimeFilters={runFilters}  \n      liveboardId={renderContent.split(\"|\")[0]} \n      frameParams={{width:'100%',height:'100%'}}\n  />\n}\nif (renderType=='Answer'){\n  renderPage = <MemorizedSearchEmbed ref={embedRef} \n      enabledActions={enabledActions.length>0 ? enabledActions : null} \n      disabledActions={disabledActions.length>0 ? disabledActions : null}  \n      onLoad={onEmbedRendered}  \n      hideDataSources={true}  \n      answerId={renderContent.split(\"|\")[0]} \n      frameParams={{width:'100%',height:'100vh'}}\n  />\n}\nif (renderType=='Search String'){\n  var searchString = buildSearchString()\n  console.log(\"init search String\",searchString)\n  var searchOptions = {\n    searchTokenString: searchString,\n    executeSearch: true,\n  }\n  var dataSources = renderContent.split(\"|\")[1].split(\",\");\n  \n  renderPage = <SearchEmbed ref={embedRef}  dataSources={dataSources} hideDataSources={true} searchOptions={searchOptions} frameParams={{width:'100%',height:'100vh'}}\n  />\n}\nif (renderType=='App'){\n  renderPage = <AppEmbed pageId={renderContent} frameParams={{width:'100%',height:'100%'}} />\n}\nif (renderType=='URL'){\n  renderPage = <iframe  style={{width:'100%',height:'100%',border:'none'}} src={renderContent}></iframe>\n}\n\ndocument.title = settings.name\n\n\nfunction openTS(){\n  window.open(settings.URL,'_blank')\n}\nfunction openGit(){\n  window.open('https://github.com/hannsta/TSE-Demo-Builder','_blank')\n}\n\n\nreturn (\n  <div style={isHorizontal ? horizontalContainer : verticalContainer}>\n      <div style={isHorizontal ? topMenu : leftMenu}>\n        <div style={isHorizontal ? logoImageHolderHorizontal: logoImageHolderVertical}>\n          <img src={settings.logoImage} style={isHorizontal ? horizontalLogoImage : verticalLogoImage}></img>\n        </div>\n        <div>\n        <NotePopup  popupVisible={popupVisible} togglePopupVisible={togglePopupVisible} popupConfig={popupConfig} primaryColor={settings.primaryColor} secondaryColor={settings.secondaryColor}></NotePopup> \n      </div>\n        {linkContainers}\n        <div style={isHorizontal ? horizontalIcons : verticalIcons}>\n          {!isHorizontal ? <div style={{margin:'10px',}}>\n              {filters}\n            </div> : <div></div>}\n          <div style={{display:'flex',flexDirection:'row',alignItems:'center', marginTop:'15px', marginBottom:'10px'}}>\n          {isHorizontal ? <div style={{display:'flex',flexDirection:'row',padding:'10px',}}>\n            {filters}\n          </div> : <div></div>}\n            <div onClick={showSettings} style={{marginRight:'5px'}}>\n            <SettingsIcon />\n            </div>\n            <div style={{width:'30px',height:'30px',marginRight:'5px'}} onClick={openTS} >\n            <TSLogo />\n            </div>\n            <div style={{width:'22px',height:'22px', marginRight:'5px'}} onClick={openGit}>\n            <GitHubLogo/>\n            </div>\n          </div>\n        </div>\n\n      </div>\n      <div id=\"TSContainer\" style={{height:'100%'}} key={renderKey}>\n        {renderPage}\n      </div>\n  </div>\n)\n}\nfunction LinkContainer(props){\n  const {\n    id,\n    name,\n    content,\n    type,\n    renderLink,\n    children,\n    isHorizontal\n  } = props\n  \n  const [hoverVisible, setHoverVisible] = useState('')\n\n  function handleLinkClick(){\n    renderLink(type, content, name)\n  }\n  var isDropdown=false;\n  if (children){\n    if (children.length>0){\n      isDropdown=true;\n    }\n  }\n\n  function handleMouseEnter(){\n    setHoverVisible(true)\n  }\n  function handleMouseLeave(){\n    setHoverVisible(false)\n  }\n  return(\n    <div style={isHorizontal ? horizontalLink : null}>\n\n      {isDropdown \n        ?\n        <div style={isHorizontal ? contentLinkHorizontal : contentLinkVertical} className=\"contentLink\" onMouseEnter={handleMouseLeave} onMouseLeave={handleMouseEnter}>\n            {name}\n            {hoverVisible ? \n              null\n            : \n            <div style={isHorizontal ? hoverMenuHorizontal : hoverMenuVertical} className='hoverMenu'>\n              {children}\n            </div>}\n\n        </div>\n        :\n        <div style={isHorizontal ? contentLinkHorizontal : contentLinkVertical} className=\"contentLink\" onClick={handleLinkClick}>\n            {name}\n        </div>      \n      }      \n  </div>)\n}\n\n// CSS to be used for vertical and horizontal alignments\nconst leftMenu = {\n  background: 'var(--primary-color)',\n  color: 'var(--secondary-color)',\n  borderRight: '1px solid #dddddd',\n  width: '150px',\n  height: '100%',\n  display: 'flex',\n  flexDirection: 'column',\n  boxShadow: '0px 0px 15px #dddddd'\n}\nconst topMenu = {\n  background: 'var(--primary-color)',\n  color: 'var(--secondary-color)',\n  borderBottom: '1px solid #dddddd',\n  width: '100%',\n  height: '75px',\n  minHeight: '75px',\n  display: 'flex',\n  flexDirection: 'row',\n  boxShadow: '0px 0px 15px #dddddd'\n}\nconst verticalContainer = {\n  display:'flex',\n  flexDirection: 'row',\n  width: '100%',\n  height: '100vh',\n  overflow: 'hidden'\n}\nconst horizontalContainer = {\n  display:'flex',\n  flexDirection: 'column',\n  width: '100%',\n  height: '100vh',\n  overflow: 'hidden'\n\n}\n\nconst logoImageHolderVertical = {\n  height: '150px',\n  width: '150px',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems:'center',\n  marginTop:'20px',\n  marginBottom:'20px'\n}\nconst logoImageHolderHorizontal = {\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems:'center',\n  marginLeft:'20px',\n  marginRight:'100px',\n}\nconst verticalLogoImage ={\n  width:'75px',\n}\nconst horizontalLogoImage ={\n  height:'50px',\n}\nconst horizontalIcons = {\n  display:'flex',\n  flexDirection:'column',\n  justifyContent:'center', \n  alignItems:'flex-end',\n  width:'100%',\n  marginRight: '15px'\n}\nconst verticalIcons = {\n  display:'flex',\n  flexDirection:'column',\n  alignItems:'center', \n  justifyContent:'flex-end',\n  height:'100vh'\n}\nconst contentLinkVertical = {\n  fontSize:'14px',\n  fontFamily: \"'Open Sans', sans-serif\",\n  paddingLeft:'15px',\n  paddingTop:'10px',\n  paddingBottom:'10px',\n  marginBottom: '5px'\n}\nconst contentLinkHorizontal = {\n  maxWidth:'100px',\n  height:'50px',\n  display:'flex',\n  alignItems: 'center',\n  flexShrink:0,\n  paddingLeft:'10px',\n  paddingRight:'25px',\n}\nconst horizontalLink = {\n  display:'flex',\n  alignItems: 'flex-end',\n  flexShrink:0,\n}\nconst hoverMenuHorizontal ={\n  position: 'absolute',\n  width: '150px',\n  top: '75px',\n  marginLeft:'-10px',\n}\nconst hoverMenuVertical = {\n  position: 'absolute',\n  width: '200px',\n  paddingRight:'10px',\n  left: '150px',\n  marginTop:'-29px',\n}\n\nfunction Filter(props){\n  const {\n    hasSelectAll,\n    filterName,\n    options,\n    type,\n    setFilter,\n    setField,\n    defaultValues\n  } = props\n  const [selectedFilter, setSelectedFilter] = useState('')\n  \n  useEffect(() => {\n    if (defaultValues){\n      setSelectedFilter(defaultValues)\n    }else{\n      setSelectedFilter([])\n    }\n  }, [])\n  \n  var overrideStrings = {\n    \"allItemsAreSelected\": \"All \"+filterName,\n    \"search\": \"Search \"+filterName,\n    \"selectAll\": \"Select All\",\n    \"selectAllFiltered\": \"Select All (Filtered)\",\n    \"selectSomeItems\": filterName,\n    \"create\": \"Create\",\n  }\n  function handleFieldChange(e){\n    setSelectedFilter(e)\n    var filterVals = []\n    for (var i=0;i<e.length;i++){\n      filterVals.push(e[i].value)\n    }\n    setField(filterName, filterVals)\n  }\n  function handleFilterChange(e){\n    var filterVals = []\n    for (var i=0;i<e.length;i++){\n      filterVals.push(e[i].label)\n    }\n    var filtersObj  = {\n      columnName: filterName,\n      operator: 'IN',\n      values: filterVals\n    }\n    setSelectedFilter(e)\n    setFilter(filtersObj)\n  }\n\n  return (\n  <MultiSelect \n    multi={true} \n    hasSelectAll={hasSelectAll} \n    value={selectedFilter} \n    options={options} \n    placeholder={\"Select \"+filterName} \n    onChange={type == 'Field' ? handleFieldChange: handleFilterChange} \n    overrideStrings={overrideStrings}/>\n  )\n}\n\nfunction UserIcon(){\n  return <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-2 -2 24 24\" width=\"24\" fill=\"currentColor\"><path d=\"M10 20C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0-14a4 4 0 0 1 4 4v2a4 4 0 1 1-8 0V8a4 4 0 0 1 4-4zm0 2a2 2 0 0 0-2 2v2a2 2 0 1 0 4 0V8a2 2 0 0 0-2-2zM5.91 16.876a8.033 8.033 0 0 1-1.58-1.232 5.57 5.57 0 0 1 2.204-1.574 1 1 0 1 1 .733 1.86c-.532.21-.993.538-1.358.946zm8.144.022a3.652 3.652 0 0 0-1.41-.964 1 1 0 1 1 .712-1.868 5.65 5.65 0 0 1 2.284 1.607 8.032 8.032 0 0 1-1.586 1.225z\"></path></svg>\n}\nfunction SettingsIcon(){\n  return <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-2 -2 24 24\" width=\"24\" fill=\"currentColor\"><path d=\"M20 8.163A2.106 2.106 0 0 0 18.926 10c0 .789.433 1.476 1.074 1.837l-.717 2.406a2.105 2.105 0 0 0-2.218 3.058l-2.062 1.602A2.104 2.104 0 0 0 11.633 20l-3.29-.008a2.104 2.104 0 0 0-3.362-1.094l-2.06-1.615A2.105 2.105 0 0 0 .715 14.24L0 11.825A2.106 2.106 0 0 0 1.051 10C1.051 9.22.63 8.54 0 8.175L.715 5.76a2.105 2.105 0 0 0 2.207-3.043L4.98 1.102A2.104 2.104 0 0 0 8.342.008L11.634 0a2.104 2.104 0 0 0 3.37 1.097l2.06 1.603a2.105 2.105 0 0 0 2.218 3.058L20 8.162zM14.823 3.68c0-.063.002-.125.005-.188l-.08-.062a4.103 4.103 0 0 1-4.308-1.428l-.904.002a4.1 4.1 0 0 1-4.29 1.43l-.095.076A4.108 4.108 0 0 1 2.279 7.6a4.1 4.1 0 0 1 .772 2.399c0 .882-.28 1.715-.772 2.4a4.108 4.108 0 0 1 2.872 4.09l.096.075a4.104 4.104 0 0 1 4.289 1.43l.904.002a4.1 4.1 0 0 1 4.307-1.428l.08-.062A4.108 4.108 0 0 1 17.7 12.4a4.102 4.102 0 0 1-.773-2.4c0-.882.281-1.716.773-2.4a4.108 4.108 0 0 1-2.876-3.919zM10 14a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0-2a2 2 0 1 0 0-4 2 2 0 0 0 0 4z\"></path></svg>\n}\n\nfunction TSLogo(){\n  return <svg xmlns=\"http://www.w3.org/2000/svg\" focusable=\"false\" width=\"100%\" height=\"100%\" viewBox='0 0 512 512'><g fill=\"currentColor\" fill-rule=\"evenodd\"><path d=\"M328.33 378.112c0-20.677 16.767-37.445 37.444-37.445 20.684 0 37.448 16.768 37.448 37.445 0 20.68-16.764 37.448-37.448 37.448-20.677 0-37.445-16.768-37.445-37.448M106 209.61h100.634v203.608h18.72V209.61h18.724v203.608h18.724V209.61h18.72v203.608h18.725V209.61H400.88v-18.724H106v18.724M106 172.165h294.88v-18.724H106zM106 134.72h294.88V116H106z\"/></g></svg>;\n}\nfunction GitHubLogo(){\n  return <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\" viewBox=\"0 0 256 250\" version=\"1.1\" preserveAspectRatio=\"xMidYMid\"><g><path d=\"M128.00106,0 C57.3172926,0 0,57.3066942 0,128.00106 C0,184.555281 36.6761997,232.535542 87.534937,249.460899 C93.9320223,250.645779 96.280588,246.684165 96.280588,243.303333 C96.280588,240.251045 96.1618878,230.167899 96.106777,219.472176 C60.4967585,227.215235 52.9826207,204.369712 52.9826207,204.369712 C47.1599584,189.574598 38.770408,185.640538 38.770408,185.640538 C27.1568785,177.696113 39.6458206,177.859325 39.6458206,177.859325 C52.4993419,178.762293 59.267365,191.04987 59.267365,191.04987 C70.6837675,210.618423 89.2115753,204.961093 96.5158685,201.690482 C97.6647155,193.417512 100.981959,187.77078 104.642583,184.574357 C76.211799,181.33766 46.324819,170.362144 46.324819,121.315702 C46.324819,107.340889 51.3250588,95.9223682 59.5132437,86.9583937 C58.1842268,83.7344152 53.8029229,70.715562 60.7532354,53.0843636 C60.7532354,53.0843636 71.5019501,49.6441813 95.9626412,66.2049595 C106.172967,63.368876 117.123047,61.9465949 128.00106,61.8978432 C138.879073,61.9465949 149.837632,63.368876 160.067033,66.2049595 C184.49805,49.6441813 195.231926,53.0843636 195.231926,53.0843636 C202.199197,70.715562 197.815773,83.7344152 196.486756,86.9583937 C204.694018,95.9223682 209.660343,107.340889 209.660343,121.315702 C209.660343,170.478725 179.716133,181.303747 151.213281,184.472614 C155.80443,188.444828 159.895342,196.234518 159.895342,208.176593 C159.895342,225.303317 159.746968,239.087361 159.746968,243.303333 C159.746968,246.709601 162.05102,250.70089 168.53925,249.443941 C219.370432,232.499507 256,184.536204 256,128.00106 C256,57.3066942 198.691187,0 128.00106,0 Z M47.9405593,182.340212 C47.6586465,182.976105 46.6581745,183.166873 45.7467277,182.730227 C44.8183235,182.312656 44.2968914,181.445722 44.5978808,180.80771 C44.8734344,180.152739 45.876026,179.97045 46.8023103,180.409216 C47.7328342,180.826786 48.2627451,181.702199 47.9405593,182.340212 Z M54.2367892,187.958254 C53.6263318,188.524199 52.4329723,188.261363 51.6232682,187.366874 C50.7860088,186.474504 50.6291553,185.281144 51.2480912,184.70672 C51.8776254,184.140775 53.0349512,184.405731 53.8743302,185.298101 C54.7115892,186.201069 54.8748019,187.38595 54.2367892,187.958254 Z M58.5562413,195.146347 C57.7719732,195.691096 56.4895886,195.180261 55.6968417,194.042013 C54.9125733,192.903764 54.9125733,191.538713 55.713799,190.991845 C56.5086651,190.444977 57.7719732,190.936735 58.5753181,192.066505 C59.3574669,193.22383 59.3574669,194.58888 58.5562413,195.146347 Z M65.8613592,203.471174 C65.1597571,204.244846 63.6654083,204.03712 62.5716717,202.981538 C61.4524999,201.94927 61.1409122,200.484596 61.8446341,199.710926 C62.5547146,198.935137 64.0575422,199.15346 65.1597571,200.200564 C66.2704506,201.230712 66.6095936,202.705984 65.8613592,203.471174 Z M75.3025151,206.281542 C74.9930474,207.284134 73.553809,207.739857 72.1039724,207.313809 C70.6562556,206.875043 69.7087748,205.700761 70.0012857,204.687571 C70.302275,203.678621 71.7478721,203.20382 73.2083069,203.659543 C74.6539041,204.09619 75.6035048,205.261994 75.3025151,206.281542 Z M86.046947,207.473627 C86.0829806,208.529209 84.8535871,209.404622 83.3316829,209.4237 C81.8013,209.457614 80.563428,208.603398 80.5464708,207.564772 C80.5464708,206.498591 81.7483088,205.631657 83.2786917,205.606221 C84.8005962,205.576546 86.046947,206.424403 86.046947,207.473627 Z M96.6021471,207.069023 C96.7844366,208.099171 95.7267341,209.156872 94.215428,209.438785 C92.7295577,209.710099 91.3539086,209.074206 91.1652603,208.052538 C90.9808515,206.996955 92.0576306,205.939253 93.5413813,205.66582 C95.054807,205.402984 96.4092596,206.021919 96.6021471,207.069023 Z\" fill=\"currentColor\"/></g></svg>\n}\n\n\nexport default Content;"]},"metadata":{},"sourceType":"module"}